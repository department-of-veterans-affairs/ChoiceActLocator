require(["dojo/_base/declare","dojo/dom","dojo/_base/lang"],function(a,b,c){return a("ProviderFeatureLayer",null,{constructor:function(){this.providerFieldName="Provider",this.providerFirstName="ProviderFirstName",this.providerLastName="ProviderSurName",this.providerSuffix="ProviderSuffix",this.providerDegree="Degree",this.providerSex="Sex",this.prescribingProvider="PrescribingProvider",this.addressFieldName="AddressLine",this.address2FieldName="AddressLine2",this.specialityFieldName="SpecialtyVACategories",this.specialityTPAFieldName="SpecialtyTPACategories",this.specialityGroup="SpecGroup",this.groupname="GroupName",this.cityFieldName="City",this.stateFieldName="State",this.zipFieldName="Zip_1",this.VISNFieldName="VISN",this.triWestOrHealthNet="TWHN",this.choiceOrPC3="ChoicePC3",this.regionFieldName="Region",this.networkFieldName="Network",this.typeFieldName="Type",this.categoryFieldName="Category",this.uIDFieldName="FID",this.uniqueProviderCode="UniqueProviderCode"},getUniqueProviderTypes:function(){return["Acupuncture","Allergy, Asthma, and Immunology","Ambulance","Ambulatory Surgery Center","Anesthesiology","Audiology","Behavioral Medicine","Cardiology","Chiropractor","Dentistry","Dermatology","Dialysis","Diet and Nutrition","Emergency Medicine / Critical Care Medicine","Endocrinology","Ent (Ears/Nose/Throat) -Otorhinolaryngology","Gastroenterology","Genetics","Gerontology","Hematology","Home Health","Hospice and Pallative Care","Hospital/Facility","Infectious Diseases","Infusion Therapy","Laboratory","Medical Supply","Neonatal-Perinatal","Nephrology","Neurology","Ob/Gyn","Oncology","Ophthalmology","Optometry","Orthopedics","Other","Pain Management","Pathology","Pediatric Specialties","Pharmacy","Physical Med/Rehabilitation","Podiatry","Primary Care","Proctology","Pulmonary Disease","Radiology / Diagnostic Imaging","Rheumatology","Surgery","Urology"]}})}),require(["dojo/_base/declare","dojo/dom","dojo/dom-construct","dojo/_base/lang"],function(a,b,c,d){return a("ProviderList",null,{constructor:function(){this._features=[]},setFeatures:function(a){this._features=a},buildProviderList:function(){this.clearProviders();for(var a=this._features,e=0;e<a.length;e++){feature=a[e];var f="";0==e?(this.listItemSelected(feature),f=this.buildListItemFromFeatures(feature,!0)):f=this.buildListItemFromFeatures(feature,!1);var g=c.place(f,b.byId("providerList"));g.value=feature,g.onclick=d.hitch(this,this.listItemClicked)}},buildListItemFromFeatures:function(a,b){var c=new ProviderFeatureLayer,d='<div class="list-group">';d+=b?'<a href="#" class="list-group-item active">':'<a href="#" class="list-group-item">';var e=a.attributes[c.providerFirstName],f=a.attributes[c.providerLastName],g=a.attributes[c.providerSuffix],h=a.attributes[c.providerDegree];return g||(g=""),d+='<h4 class="list-group-item-heading">'+e+" "+f+" "+g+" "+h+"</h4>",d+='<p class="list-group-item-text" style="text-align: center">'+a.attributes[c.addressFieldName]+"<br>",d+=a.attributes[c.cityFieldName]+", "+a.attributes[c.stateFieldName]+"  "+a.attributes[c.zipFieldName]+"</p><br>",d+='<p  class="list-group-item-text" style="text-align: left">'+a.attributes[c.groupname]+"<br>",d+="Specialty: "+a.attributes[c.specialityFieldName]+"</p>",d+='<h5 style="text-align:right">'+a.attributes.distance+" miles </h5>",d+="</a></div>"},listItemClicked:function(a){this.clearSelectedItems(),a.target.parentNode.classList.contains("list-group-item")&&!a.target.parentNode.classList.contains("active")?a.target.parentNode.classList.add("active"):a.target.classList.contains("list-group-item")&&!a.target.classList.contains("active")&&a.target.classList.add("active");var b=[];b=a.target.parentNode.classList.contains("list-group-item")?a.target.parentNode.parentNode.value:a.target.parentNode.value,b!=[]&&this.listItemSelected(b)},showNoProvidersResulted:function(){this.clearProviders();var a='<div class="alert alert-danger" role="alert"><strong>No Providers Found</strong> Your search resulted in no providers. Please expand your search radius or update your filter parameters using the Filter link below the searchbox </div>';c.place(a,b.byId("providerList"))},clearSelectedItems:function(){var a=b.byId("providerList").children;for(childIndex=0;childIndex<a.length;childIndex++){var c=a[childIndex].children[0];c.classList.remove("active")}},selectProviders:function(a){this.clearSelectedItems();for(var c=new ProviderFeatureLayer,d=a,e=0;e<d.length;e++){var f=d[e],g=b.byId("providerList").children;for(childIndex=0;childIndex<g.length;childIndex++){var h=g[childIndex].value,i=g[childIndex].children[0];h.attributes[c.uniqueProviderCode]==f.attributes[c.uniqueProviderCode]&&i.classList.add("active")}}},clearProviders:function(){c.empty("providerList")},listItemSelected:function(a){}})}),require(["dojo/_base/declare","dojo/dom-construct","esri/layers/FeatureLayer","esri/tasks/query","esri/tasks/QueryTask","dojo/_base/lang"],function(a,b,c,d,e,f){return a("SearchFilters",null,{constructor:function(){this._radiusDropDown=dojo.byId("searchRadius"),this._providerDropDown=dojo.byId("providerType"),this.advanceSearchOptionsSet=!1,this._providerNameTexInput=dojo.byId("providerNameSearch"),this._providerGroupTexInput=dojo.byId("providerNetworkSearchgrp"),this._providerSexDropDown=dojo.byId("searchSex"),this._providerSpecGroupDropDown=dojo.byId("searchSpecGroup"),this._providerProgramDropDown=dojo.byId("searchProgram"),this.populateProviderTypesCombo();for(var a=this._providerDropDown.getElementsByTagName("input"),b=0;b<a.length;b++){var c=a[b];c.onclick=f.hitch(this,this.gotButtonInfo)}for(var a=this._radiusDropDown.getElementsByTagName("input"),b=0;b<a.length;b++){var c=a[b];c.onclick=f.hitch(this,this.gotButtonInfo)}dojo.byId("btnAdvanceSearch").onclick=f.hitch(this,this.advanceSearchClicked),dojo.byId("btnClearSearch").onclick=f.hitch(this,this.advanceClearClicked),this._featureLayer=[],this.advanceClearClicked();var d=$("#providerNameSearchresults");d.hide()},setFeatureLayer:function(a){this._featureLayer=a},gotButtonInfo:function(){this.basicSearchChanged()},advanceSearchClicked:function(){this.advanceSearchOptionsSet=!0,this.advanceSearchChanged()},advanceClearClicked:function(){this.advanceSearchOptionsSet=!1,this.clearAdvanceSearchProps(),this.basicSearchChanged()},isDefaultSettings:function(){var a=!1;return dojo.byId("ddDist_1").checked&&dojo.byId("ddType_1").checked&&(a=!0),a},getSearchRadius:function(){for(var a=this._radiusDropDown.getElementsByTagName("input"),b="1",c=0;c<a.length;c++){var d=a[c];if(d.checked){b=parseInt(d.value);break}}return b},setSearchRadius:function(a){for(var b=this._radiusDropDown.getElementsByTagName("input"),c=0;c<b.length;c++){var d=b[c];d.value==a?(d.checked=!0,dojo.byId("searchRadiusBtn").getElementsByTagName("span")[0].textContent=a+" Mile"):d.checked=!1}},getProviderType:function(){for(var a=this._providerDropDown.getElementsByTagName("input"),b="All",c=0;c<a.length;c++){var d=a[c];if(d.checked){b=d.value;break}}return b},getProviderName:function(){return this._providerNameTexInput.value},getProviderGroupName:function(){return this._providerGroupTexInput.value},getProviderSex:function(){var a=this._providerSexDropDown;return value=this.getDropDownValue(a,"All"),"Male"==value?value="M":"Female"==value&&(value="F"),value},getProviderSpecGroup:function(){var a=this._providerSpecGroupDropDown;return value=this.getDropDownValue(a,"All"),value},getProviderProgram:function(){return value=this.getDropDownValue(this._providerProgramDropDown,"All"),value},getDropDownValue:function(a,b){var c=a.getElementsByTagName("input");value=b;for(var d=0;d<c.length;d++){var e=c[d];if(e.checked){value=e.value;break}}return value},clearAdvanceSearchProps:function(){this._providerNameTexInput.value="",this._providerGroupTexInput.value="",this.selectDropDownValue(this._providerProgramDropDown,"All"),this.selectDropDownValue(this._providerSpecGroupDropDown,"All"),this.selectDropDownValue(this._providerSexDropDown,"All")},selectDropDownValue:function(a,b){a.getElementsByTagName("span")[0].textContent=b;for(var c=a.getElementsByTagName("input"),d=0;d<c.length;d++){var e=c[d];e.value==b?e.checked=!0:e.checked=!1}},populateProviderTypesCombo:function(){for(var a=new ProviderFeatureLayer,b=a.getUniqueProviderTypes(),c=$("#providerTypesDropDownMenu"),d=0;d<b.length;d++){var e=b[d],f='<li><input type="radio" id="ddProvType_'+d.toString()+'" name="exType" value="'+e+'" ><label for="ddProvType_'+d.toString()+'">'+e+"</label></li>";c.append(f)}},searchProviderNames:function(a){var b=new ProviderFeatureLayer,c=b.providerLastName;if(a.target.value.length>=1){var e=new d;e.where="upper( "+c+") like upper('%"+a.target.value.toString()+"%')",e.outFields=[c],e.returnGeometry=!1,e.num=20,this._featureLayer.queryFeatures(e,f.hitch(this,this.showProviders))}else{var g=$("#providerNameSearchresults");g.hide()}},showProviders:function(a){var b=new ProviderFeatureLayer,c=b.providerLastName,d=$("#providerNameSearchresults");d.show(),d.html("");for(var e=this.getUniqueFeatureResults(a.features,c),f=(a.features,0);f<e.length&&10>f;f++){var g=e[f];d.append('<li style="padding-top: 3px; padding-bottom: 3px"><a style="color: #999; word-wrap: break-word; white-space: normal" href="#">'+g+"</a></li>")}},getUniqueFeatureResults:function(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d].attributes[b],f=!1;for(valuesIndex=0;valuesIndex<c.length;valuesIndex++)if(e.toLowerCase()==c[valuesIndex].toLowerCase()){f=!0;break}f||c.push(e)}return c},buildWhereClause:function(){var a=new ProviderFeatureLayer,b=this.getProviderType(),c=a.specialityFieldName,d="1=1";if("All"==b||this.advanceSearchOptionsSet||(d=c+" = '"+b+"'"),this.advanceSearchOptionsSet){"All"!=b&&(d=c+" = '"+b+"'");var e=this.getProviderName();providerNameWhereClause=this.buildProviderNameWhereQuery(e),console.log(providerNameWhereClause);a.providerLastName;""!=e&&"1=1"!=d?(providerNameWhereClause=this.buildProviderNameWhereQuery(e),d+=" AND "+providerNameWhereClause):""!=e&&(providerNameWhereClause=this.buildProviderNameWhereQuery(e),d=providerNameWhereClause);var f=this.getProviderGroupName(),g=a.groupname;""!=f&&"1=1"!=d?d+=" AND upper( "+g+") like upper('%"+f+"%')":""!=f&&(d="upper( "+g+") like upper('%"+f+"%')");var h=this.getProviderSex(),i=a.providerSex;"All"!=h&&"1=1"!=d?d+=" AND "+i+" = '"+h+"'":"All"!=h&&(d=i+" = '"+h+"'");var j=this.getProviderSpecGroup(),k=a.specialityGroup;"All"!=j&&"1=1"!=d?d+=" AND "+k+" = '"+j+"'":"All"!=j&&(d=k+" = '"+j+"'");var l=this.getProviderProgram(),m=a.choiceOrPC3;"All"!=l&&"1=1"!=d?d+=" AND "+m+" = '"+l+"'":"All"!=j&&(d=m+" = '"+l+"'")}return console.log(d),d},buildProviderNameWhereQuery:function(a){var b=a.trim().split(" "),c=new ProviderFeatureLayer,d=c.providerLastName,e=c.providerFirstName,f="( ";for(index=0;index<b.length;index++)name=b[index],"( "!=f&&(f+=" AND "),f+="(upper( "+d+") like upper('%"+name+"%') OR upper( "+e+") like upper('%"+name+"%'))";return f+=" )"},basicSearchChanged:function(){},advanceSearchChanged:function(){}})}),require(["esri/map","esri/arcgis/utils","esri/geometry/Point","dojo/_base/declare","dojo/on","dojo/touch","dojo/dom","dojo/_base/lang","dojo/dom-style","dojo/query","dojo/NodeList-traverse","dojo/dom-class","dojo/domReady!"],function(a,b,c,d,e,f,g,h,i,j,k,l){return d("BootstrapMap",null,{constructor:function(a,b){},create:function(a,b){var c,d;return a&&b?(c=new this._smartResizer(a,b),d=c.createMap(),d._smartResizer=c,d):void 0},createWebMap:function(a,b,c){var d,e;return b&&c?(d=new this._smartResizer(b,c),e=d.createWebMap(a)):void 0},destroy:function(a){function b(a){if(a._handles)for(var b=a._handles.length;b--;)a._handles[b].remove(),a._handles.splice(b,1)}a&&a._smartResizer&&b(a._smartResizer)},_smartResizer:d(null,{constructor:function(a,b){this._map=null,this._autoRecenterDelay=50,this._popupRecenterDelayer=150,this._popupPosition="top",this._popupBlocked=!1,this._visible=!0,this._visibilityTimer=null,this._mapDeferred=null,this._autoRecenter=b.autoRecenter||!0,this._responsiveResize=b.responsiveResize||!0,this._mapDivId=a,this._mapDiv=g.byId(a),this._mapStyle=i.get(this._mapDiv),this._options=h.mixin(b,{}),this._handles=[]},createMap:function(){return this._setMapDiv(!1),this._responsiveResize&&h.mixin(this._options,{smartNavigation:!1,autoResize:!1}),this._map=new a(this._mapDivId,this._options),this._setPopup(),this._bindEvents(),this._mapDiv.__map=this._map,this._map},createWebMap:function(a){var c,d,e;return this._setMapDiv(!1),this._options.hasOwnProperty("mapOptions")||(this._options.mapOptions={}),this._responsiveResize&&h.mixin(this._options.mapOptions,{smartNavigation:!1,autoResize:!1}),c=b.createMap(a,this._mapDivId,this._options),this._mapDeferred=c,d=this,e=function(a){this._map=a.map,this._setPopup(),this._bindEvents(),this._mapDiv.__map=this._map,this._smartResizer=d},this._mapDeferred.then(h.hitch(this,e)),c},_setPopup:function(){l.add(this._map.infoWindow.domNode,"light")},_setTouchBehavior:function(){this._options.hasOwnProperty("scrollWheelZoom")&&this._options.scrollWheelZoom?this._map.enableScrollWheelZoom():this._map.disableScrollWheelZoom(),e(j(".esriPopup .titleButton.close"),f.press,h.hitch(this,function(){this._map.infoWindow.hide()}))},_bindEvents:function(){var a,b,c,d,f,g,i;return this._map?(a=function(){this._setTouchBehavior()},this._map.loaded?h.hitch(this,a).call():this._handles.push(e(this._map,"load",h.hitch(this,a))),b=function(){this._map.infoWindow.anchor=this._popupPosition;var a=function(a){var b=a._map.infoWindow.location;b&&!a._popupBlocked&&(a._popupBlocked=!0,window.setTimeout(function(){a._repositionMapForInfoWin(b),a._popupBlocked=!1},a._popupRecenterDelayer))};this.counter=0,this._map.on("click",h.hitch(this,function(){this._map.infoWindow.isShowing&&a(this)})),e(this._map.graphics,"click",h.hitch(this,function(){a(this)})),e(this._map.infoWindow,"show",h.hitch(this,function(){a(this)}))},this._map.loaded?h.hitch(this,b).call():this._handles.push(e(this._map,"load",h.hitch(this,b))),c=function(a,b,c){return function(){function e(){c||a.apply(f,g),d=null}var f=this,g=arguments;d?clearTimeout(d):c&&a.apply(f,g),d=setTimeout(e,b||100)}},f=c(this._setMapDiv,100,!1),this._handles.push(e(window,"resize",h.hitch(this,f))),void(this._autoRecenter&&(g=function(){this._map.__resizeCenter=this._map.extent.getCenter(),i=function(){this._map.centerAt(this._map.__resizeCenter)},setTimeout(h.hitch(this,i),this._autoRecenterDelay)},this._handles.push(e(this._map,"resize",h.hitch(this,g)))))):void console.error("BootstrapMap: Invalid map object. Please check map reference.")},_getMapDivVisibility:function(){return this._mapDiv.clientHeight>0||this._mapDiv.clientWidth>0},_checkVisibility:function(){var a=this._getMapDivVisibility();this._visible!==a&&a&&this._setMapDiv(!0)},_controlVisibilityTimer:function(a){a?this._visibilityTimer=setInterval(h.hitch(this,function(){this._checkVisibility()}),200):this._visibilityTimer&&(clearInterval(this._visibilityTimer),this._visibilityTimer=null)},_setMapDiv:function(a){if(this._mapDivId&&this._responsiveResize){var b,c,d,e,f,g,h,j,k;b=this._getMapDivVisibility(),this._visible!==b&&(this._visible=b,this._controlVisibilityTimer(!b)),this._visible&&(c=document.documentElement.clientHeight,d=document.body.clientHeight,e=c-d,f=this._calcMapHeight(),g=this._calcColumnHeight(f),h=f+e,j=0,k=!1,g>f?(j=e>0?g+e:g,k=!0):(j=g>h?g:h,k=!1),i.set(this._mapDivId,{height:j+"px",width:"auto"}),this._map&&a&&this._visible&&(this._map.resize(),this._map.reposition()))}},_calcMapHeight:function(){var a=this._mapStyle,b=parseInt(a.paddingTop,10)+parseInt(a.paddingBottom,10)||0,c=parseInt(a.marginTop,10)+parseInt(a.marginBottom,10)||0,d=parseInt(a.borderTopWidth,10)+parseInt(a.borderBottomWidth,10)||0,e=b+c+d+this._mapDiv.clientHeight;return e},_calcColumnHeight:function(a){var b,c,d,e=0,f=j(this._mapDiv).closest(".row").children("[class*='col']");if(f.length)for(b=0;b<f.length;b++)c=f[b],d=j("#"+this._mapDivId,c).length>0,c.clientHeight>e&&!d&&(e=c.clientHeight);return e},_repositionMapForInfoWin:function(a){var b=new c(this._map.extent.xmax,this._map.extent.ymax,this._map.spatialReference),d=new c(this._map.extent.getCenter()),e=this._map.toScreen(b),f=this._map.toScreen(d),g=this._map.toScreen(a),h=10,i=3,j=this._map.infoWindow.domNode.childNodes[0],k=j.clientWidth,l=j.clientHeight+this._map.infoWindow.marginTop,m=g.x-k/2,n=g.x+k/2,o=0>m-h,p=n>e.x-h,q=this._map.infoWindow.offsetY,r=g.y-l-q,s=0>r-i;o?f.x-=Math.abs(m)+h<h?h:Math.abs(m)+h:p&&(f.x+=n-e.x+h),s&&(f.y+=r-i),(p||o||s)&&(d=this._map.toMap(f),this._map.centerAt(d))}})})}),require(["dojo/dom","dojo/dom-style","dojo/on","dojo/query","dojo/_base/Color","dojo/dom-construct","dojo/domReady!"],function(a,b,c,d,e,f){function g(){var a=$(window).height();$("#searchListContainer").height(a-70),$("#mapContainer").height(a-70)}g(),window.onresize=g}),require(["esri/map","esri/config","esri/dijit/Geocoder","esri/dijit/Scalebar","esri/dijit/Legend","esri/dijit/LocateButton","esri/graphic","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/layers/FeatureLayer","esri/tasks/query","esri/geometry/Circle","esri/geometry/Polyline","esri/geometry/Point","esri/tasks/DistanceParameters","esri/tasks/GeometryService","esri/tasks/ProjectParameters","esri/geometry/geodesicUtils","esri/geometry/mathUtils","esri/arcgis/utils","esri/urlUtils","dijit/registry","dojo/dom","dojo/dom-style","dojo/on","dojo/promise/all","dojo/query","dojo/_base/Color","dojo/domReady!"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){function D(a){var b=new BootstrapMap,c=b.createWebMap("7a6ead3957e8440dbdfcc78f9ba8f2ba","mapDiv",{slider:!0,nav:!1,smartNavigation:!1});c.then(function(a){T=a.map;var b=esri.arcgis.utils.getLegendLayers(a);T.loaded?G(b):z(T,"load",function(){G(b)})},function(a){alert("Sorry, couldn't load webmap!"),console.log("Error loading webmap: "&dojo.toJson(a))})}function E(a){X=a.result.feature.geometry,I(U,X)}function F(a){T.infoWindow.hide(),T.graphics.clear(),$.clearProviders()}function G(a){Y=new SearchFilters,Y.basicSearchChanged=M,Y.advanceSearchChanged=N,$=new ProviderList,$.listItemSelected=R,V=new ProviderFeatureLayer,U=a[0].layer,U.on("selection-complete",S),Y.setFeatureLayer(U),W=new f({map:T},x.byId("LocateButton")),W.startup(),navigator.geolocation&&navigator.geolocation.getCurrentPosition(H)}function H(a){X=new o(a.coords.longitude,a.coords.latitude),I(U,X)}function I(a,b){if(aa)K(a,b,"1=1"),aa=!1;else{var c=Y.getSearchRadius();J(c,b,a)}}function J(a,b,c){var d=new m({center:b,geodesic:!0,radius:a,radiusUnit:"esriMiles"});O(b,d);var e=new l;e.geometry=b,e.units="miles",e.distance=a,where=Y.buildWhereClause(),e.where=where;Y.getProviderType();"1=1"!=where?c.setDefinitionExpression(where):c.setDefinitionExpression(""),c.queryFeatures(e,P)}function K(a,b,c){var d=[],e=[5,20];for(index=0;index<e.length;index++){var f=new l;f.geometry=b,f.units="miles",f.distance=e[index],f.where="1=1",f.returnCount=!0,d.push(a.queryCount(f))}promises=A(d),promises.then(function(c){var d=!1,e=100,f=[5,20];for(searchIndex=0;searchIndex<2;searchIndex++){var g=c[searchIndex];if(100>g&&g>=10){d=!0,e=f[searchIndex];break}}if(d)L(e);else{var h=new l;h.geometry=b,h.units="miles",h.distance=f[index],h.where="1=1",h.returnCount=!0;var i=c[0],j=c[1];if(i>100)h.distance=1,a.queryCount(h,function(a){e=a>0?1:5,L(e)});else if(j>100){h.distance=10;var k=a.queryCount(h);e=100>k&&k>=10?10:i>0&&k>100?5:k>0?10:20,L(e)}else if(10>j){h.distance=40;var m=a.queryCount(h);e=100>m&&m>=10?40:10>m?100:m>100&&j>0?20:m>0?40:100,L(e)}else L(100)}})}function L(a){Y.setSearchRadius(a),J(a,X,U)}function M(){"undefined"!=typeof X&&I(U,X)}function N(){"undefined"!=typeof X&&(whereClause=Y.buildWhereClause(),K(U,X,whereClause))}function O(a,b){T.graphics.clear(),T.infoWindow.hide();var c=a,d=(new h).setStyle(h.STYLE_SQUARE).setColor(new C([255,0,0,.5])),e=new g(c,d);T.graphics.add(e);var f=new j(j.STYLE_NULL,new i(i.STYLE_SHORTDASHDOTDOT,new C([105,105,105]),2),new C([255,255,0,.25])),e=new g(b,f);T.graphics.add(e),T.setExtent(b.getExtent().expand(1.5)),T.centerAt(c)}function P(a){var b=a.features;Z=b,b.length>0?Q(b):$.showNoProvidersResulted()}function Q(a){var b=new q(_),c=new r;c.geometries=[X],c.outSR=a[0].geometry.spatialReference,b.project(c,function(b){for(var c=b[0],d=0;d<a.length;d++){feature=a[d];var e=t.getLength(c,feature.geometry);e=Math.round(621371e-9*e*100)/100,feature.attributes.distance=e}a.sort(function(a,b){return a.attributes.distance-b.attributes.distance}),$.setFeatures(a),$.buildProviderList()})}function R(a){T.infoWindow.setFeatures([a]),T.infoWindow.show(a.geometry)}function S(a){$.selectProviders(a.features)}b.defaults.io.proxyUrl=location.protocol+"//"+location.host+"/proxy/proxy.ashx";var T,U,V,W,X,Y,Z,$,_="http://utility.arcgisonline.com/ArcGIS/rest/services/Geometry/GeometryServer",aa=!0;window.onbeforeprint=function(){console.log("This will be called before the user prints.")};var ba=new c({arcgisGeocoder:{placeholder:"Address Search"},autoComplete:!0,map:T},x.byId("search"));ba.on("select",E),ba.on("clear",F),D()});